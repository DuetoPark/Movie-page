"use strict";$(document).on("click",".event-button",function(event){event.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},1e3),toggleHeader()});// 배너 & playing - 중복 처리
var prototypeInfo={changeName:function changeName(data,item){"playing"===item.dataset.list||(item.querySelector(".name").textContent=data.name)},changeImage:function changeImage(data,item){var path;path="playing"===item.dataset.list?"../assets/images/".concat(data.poster,".jpg"):"../assets/images/".concat(data.image,".gif"),item.querySelector(".image").setAttribute("src",path),item.querySelector(".image").setAttribute("alt",data.name)},changeStar:function changeStar(data,item){var star,fillStar=Math.floor(data.star),emptyStar=Math.ceil(data.star-Math.floor(data.star));star="\u2605".repeat(fillStar)+"\u2606".repeat(emptyStar)+"(",item.querySelector(".icon").textContent=star},changeGenre:function changeGenre(data,item){var genre=Object.keys(data.genre).map(function(key){return data.genre[key]?key:""}).filter(function(item){return""!=item}).join(", ");item.querySelector(".genre > dd").textContent=genre},clone:function(data){var clone=this.origin.cloneNode(!0);clone.setAttribute("data-origin",!1),clone.querySelector(".review > p").textContent=data.review,clone.querySelector(".review > cite").textContent=data.reviewUser,clone.querySelector(".desc-title").textContent=data.name,clone.querySelector(".rating").setAttribute("aria-label",data.star+"\uC810"),clone.querySelector(".rating").textContent=data.star,clone.querySelector(".actor > dd").textContent=data.actor,clone.querySelector(".director > dd").textContent=data.director,this.changeName(data,clone),this.changeImage(data,clone),this.changeStar(data,clone),this.changeGenre(data,clone),this.container.appendChild(clone)},populate:function populate(target){var keys=Object.keys(state.movieList).slice(1);keys.forEach(function(key){return target.clone(state.movieList[key])})}};function infoFactory(section){var info=Object.create(prototypeInfo);return info.elem=document.querySelector(section),info.container=info.elem.querySelector("ol"),info.origin=info.elem.querySelector("li:first-of-type"),info.populate(info),info}var bannerInfo=infoFactory("#banner"),playingInfo=infoFactory("#playing"),bannerListItems=document.querySelectorAll("#banner li");function toggleInfo(boolean,bannerItem){var info=bannerItem.querySelector(".info");bannerItem.classList[boolean?"add":"remove"]("active"),info.classList[boolean?"remove":"add"]("hidden")}function translateInfo(bannerItem){var info=bannerItem.querySelector(".info"),coords={};-1==navigator.userAgent.indexOf("Chrome")?(coords.left=banner.offsetLeft-1.5*bannerItem.offsetWidth,coords.top=bannerItem.offsetTop+banner.offsetTop):(coords.left=banner.offsetLeft,coords.top=bannerItem.offsetTop+banner.offsetTop+.5*banner.offsetHeight),info.style.transform="translate(".concat(coords.left,"px, ").concat(coords.top,"px)")}function handleMouseEnter(){window.innerWidth<screenSize.desktop||(toggleInfo(!0,this),translateInfo(this))}function handleMouseLeave(){toggleInfo(!1,this)}bannerListItems.forEach(function(item){item.addEventListener("mouseenter",handleMouseEnter),item.addEventListener("mouseleave",handleMouseLeave)});// New - 첫번째 리뷰 보임/숨김
var firstReview=document.querySelector("#new .review > p:first-of-type");function handleReview(){firstReview.classList[onTablet?"remove":"add"]("hidden")}document.addEventListener("DOMContentLoaded",handleReview),window.addEventListener("resize",handleReview);// Playing 이미지카드 클릭 이벤트
var imageCards=document.querySelectorAll(".image-card");function flipCard(){onMobile&&this.classList.toggle("flipped")}imageCards.forEach(function(card){return card.addEventListener("click",flipCard)});// Playing 높이 조절 이벤트
function changeHeightOfImageCards(){var playing=document.querySelector("#playing"),imagesCards=playing.querySelectorAll(".image-card");imagesCards.forEach(function(imagesCard){var image=imagesCard.querySelector(".image"),imageHeight=image.clientHeight;imagesCard.style.setProperty("--imageHeight","".concat(imageHeight,"px"))})}// load 이벤트를 사용하는 이유
// - changeHeightOfImageCards()는 이미지의 clientHeight를 이용하는 함수
// - img태그를 인식하고 바로 넘겨버리는 DOMContentLoaded는 적합하지 않음
window.addEventListener("load",changeHeightOfImageCards),window.addEventListener("resize",changeHeightOfImageCards);// 로컬스토리지 데이터 저장
function saveIdIntoLocalStorage(){var data={},userId=window.location.search.split("=")[1];userId&&(data.id=userId,localStorage.setItem("bookedData",JSON.stringify(data)))}saveIdIntoLocalStorage();