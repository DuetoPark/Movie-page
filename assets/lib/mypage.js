"use strict";// 헤더 스크롤 이벤트 - fixedNav
var nav=document.querySelector("#menu"),topOfNav=nav.offsetHeight;function fixNav(){72<=window.scrollY?nav.classList.add("fixed-nav"):nav.classList.remove("fixed-nav")}window.addEventListener("scroll",fixNav),$(document).on("click","a[href^=\"#\"]",function(event){event.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top-topOfNav},500)});// 프로필 사진 변경 (인터넷에서 긁어옴)
var profileImage=document.querySelector(".profile-image"),inputFiles=document.querySelector("#files");function readURL(){var reader=new FileReader;reader.onload=function(e){profileImage.setAttribute("src",e.target.result)},reader.readAsDataURL(this.files[0])}inputFiles.addEventListener("change",readURL);// 예매내역 출력 & pagenation 클릭 이벤트
var bookedHistory=document.querySelector("#history"),historyData=state.booked,currentData=[],currentTableRow=[],currentIndex=0;function createTr(tbody,fragment){var tr=document.createElement("tr");tr.innerHTML="\n    <td class='history-date'></td>\n    <td class='history-name'></td>\n    <td class='history-count'></td>\n    <td class='history-seat'></td>\n  ",fragment.appendChild(tr),currentTableRow.push(tr)}function matchData(currentData){currentTableRow.forEach(function(tr,index){var dateElement=tr.querySelector(".history-date"),nameElement=tr.querySelector(".history-name"),countElement=tr.querySelector(".history-count"),seatElement=tr.querySelector(".history-seat"),dateValue=currentData[index]?currentData[index].date:"",nameValue=currentData[index]?currentData[index].movie.name:"",countValue=currentData[index]?currentData[index].count.total:"",seatValue=currentData[index]?currentData[index].seat:"";dateElement.textContent=dateValue,nameElement.textContent=nameValue,countElement.textContent=countValue,seatElement.textContent=seatValue})}function populateTbody(tbody){for(var fragment=document.createDocumentFragment(),i=0;5>i;i+=1)createTr(tbody,fragment);tbody.appendChild(fragment),currentData=historyData.slice(currentIndex,currentIndex+5),matchData(currentData)}function sliceFiveUnits(e){var tbody=document.querySelector(".table-body"),preButton=document.querySelector(".pagenation-button.pre"),nextButton=document.querySelector(".pagenation-button.next"),limit=5*Math.floor(historyData.length/5);0<currentIndex&&e.target===preButton?currentIndex-=5:currentIndex<limit&&e.target===nextButton&&(currentIndex+=5),tbody.innerHTML="",currentTableRow=[],populateTbody(tbody)}(function(){bookedHistory.innerHTML="\n    <table aria-label='\uC774\uC804 \uC608\uB9E4 \uB0B4\uC5ED'>\n      <thead class='table-head'>\n        <tr>\n          <th>\uB0A0\uC9DC</th>\n          <th>\uC601\uD654\uC774\uB984</th>\n          <th>\uC778\uC6D0</th>\n          <th>\uC88C\uC11D</th>\n        </tr>\n      </thead>\n      <tbody id='table-body' class='table-body' role='tabpanel'></tbody>\n    </table>\n  ";var tbody=bookedHistory.querySelector("#table-body");populateTbody(tbody)})(),function(){var pagenation=document.createElement("div");pagenation.setAttribute("class","pagenation d-flex justify-content-center"),pagenation.innerHTML="\n    <button class='pagenation-button pre inactive'\n      role='tab'\n      aria-controls='table-body' aria-label='\uC774\uC804'>\n    </button>\n    <button class='pagenation-button next'\n      role='tab'\n      aria-controls='table-body' aria-label='\uB2E4\uC74C'>\n    </button>\n  ",bookedHistory.appendChild(pagenation),pagenation.addEventListener("click",sliceFiveUnits)}();// 예매내역 버튼 클릭
var bookedButton=document.querySelector("#booked .show-more");function showMoreHistory(){var bookedHistory=document.querySelector("#history");bookedHistory.classList.remove("hidden"),bookedHistory.classList.add("active"),bookedButton.setAttribute("aria-expanded",!0)}function hideBookedButton(){bookedButton.classList.add("hidden")}function toggleHistory(){showMoreHistory(),hideBookedButton()}bookedButton.addEventListener("click",toggleHistory);